<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CVE_AUTO_RECON | Critical Vulnerability Feed</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ===== RESET ===== */
* { box-sizing: border-box; margin: 0; padding: 0; }

/* ===== BODY ===== */
body {
  background: radial-gradient(circle at top, #0b0f14 0%, #000 70%);
  color: #00ff9c;
  font-family: Consolas, Monaco, "Courier New", monospace;
  min-height: 100vh;
  padding: 40px;
}

/* ===== HEADER ===== */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 25px;
}

.title {
  font-size: 20px;
  color: #ffffff;
}

.subtitle {
  font-size: 12px;
  color: #8b949e;
}

.status {
  font-size: 12px;
  color: #00ff9c;
}

.status::before {
  content: "● ";
}

/* ===== PANEL ===== */
.panel {
  border: 1px solid #1f2933;
  background: rgba(0,0,0,0.6);
  padding: 20px;
  box-shadow: 0 0 40px rgba(0,255,156,0.05);
}

/* ===== TERMINAL ===== */
.terminal {
  white-space: pre-wrap;
  font-size: 13px;
  line-height: 1.5;
  height: 360px;
  overflow-y: auto;
}

/* ===== COLORS ===== */
.ok { color: #00ff9c; }
.info { color: #58a6ff; }
.warn { color: #f85149; }
.dim { color: #6e7681; }

/* ===== FOOTER ===== */
.footer {
  margin-top: 20px;
  font-size: 11px;
  color: #6e7681;
  text-align: center;
}
</style>
</head>

<body>

<div class="header">
  <div>
    <div class="title">[CVE_AUTO_RECON]</div>
    <div class="subtitle">Critical Vulnerability Intelligence Portal</div>
  </div>
  <div class="status">RECON_NODE: ACTIVE</div>
</div>

<div class="panel">
  <div id="terminal" class="terminal"></div>
</div>

<div class="footer">
  SOURCE_NODES: MITRE / NIST / CVEFEED — SECURITY_LEVEL: ENCRYPTED_STREAM
</div>

<script>
const term = document.getElementById("terminal");

function log(text, cls="ok", delay=500) {
  return new Promise(res => {
    setTimeout(() => {
      const span = document.createElement("span");
      span.className = cls;
      span.textContent = text + "\n";
      term.appendChild(span);
      term.scrollTop = term.scrollHeight;
      res();
    }, delay);
  });
}

async function bootSequence() {
  await log("> INITIALIZING_UPLINK...", "info", 700);
  await log("> ATTEMPTING_NODE_01...", "info", 700);
  await log("> NODE_01_OFFLINE: Timeout or CORS block.", "warn", 900);
  await log("> ATTEMPTING_NODE_02...", "info", 700);
  await log("> NODE_02_ONLINE", "ok", 700);
  await log("> SYNCING_VULNERABILITY_FEED...\n", "info", 900);

  loadCVEs();
}

async function loadCVEs() {
  try {
    /* 
      DEMO FEED
      Daha sonra bunu şuna çevir:
      fetch("/assets/data/cve-latest.json")
    */
    const res = await fetch("https://cve.circl.lu/api/last");
    const data = await res.json();

    const critical = data.slice(0, 10);

    for (const cve of critical) {
      await log(`[CVE] ${cve.id}`, "ok", 300);
      await log(`DESC: ${cve.summary || "No description"}`, "dim", 200);
      await log(`PUBLISHED: ${cve.Published || "N/A"}`, "dim", 200);
      await log("----------------------------------------", "dim", 150);
    }

    await log("\n> FEED_SYNC_COMPLETE", "info", 500);

  } catch (e) {
    await log("> ERROR: FEED_UNREACHABLE", "warn", 500);
    await log("> SWITCHING_TO_PASSIVE_MODE", "warn", 500);
  }
}

bootSequence();
</script>

</body>
</html>
